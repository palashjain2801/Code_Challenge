{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\jainp\\\\Desktop\\\\work_Space\\\\codingchallenge\\\\y5j45\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jainp\\\\Desktop\\\\work_Space\\\\codingchallenge\\\\y5j45\\\\src\\\\components\\\\RowSelection.js\";\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport { useTable, useRowSelect } from \"react-table\";\nimport { COLUMNS } from \"./columns\";\nimport \"./table.css\";\nimport { Checkbox } from \"./Checkbox\";\nexport const RowSelection = () => {\n  const columns = useMemo(() => COLUMNS, []);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const fetchDataFromLink = link => {\n    //TODO fetch link, should be an Array\n    //return array of string\n    //https://cors-anywhere.herokuapp.com/https://sahmed93846.api-us1.com/api/3/contacts/193/contactTags\n    fetch(\"https://cors-anywhere.herokuapp.com/\" + link, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Api-Token\": \"bcd062dedabcd0f1ac8a568cdcf58660c44d7e79b91763cc1a5d0c03d52c522d851fceb0\"\n      }\n    }).then(res => res.json()).then(response => {\n      console.log(\"ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥\", response);\n      return response; //setData(response.contacts);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const preprocessData = data => {\n    let processedData = [];\n    console.log(\"processing data\");\n    data.forEach(element => {\n      console.log(element);\n      processedData.push(preprocessRow(element));\n    });\n    return processedData;\n  };\n\n  const preprocessRow = row => {\n    let newData = {};\n    let keysToBeFetched = [\"contactTags\", \"deals\", \"geoIps\"];\n    Object.keys(row).map(key => {\n      // console.log(\"ðŸš€ðŸš€ðŸš€ðŸš€\", key);\n      if (key === \"links\") {\n        newData[key] = {};\n        Object.keys(row[key]).map(linkName => {\n          //\n          if (keysToBeFetched.includes(linkName)) {\n            let dataFromLink = fetchDataFromLink(row[key][linkName]);\n            console.log(\"Data From Link \" + dataFromLink);\n            newData[key][linkName] = dataFromLink;\n          } else {\n            newData[key][linkName] = row[key][linkName];\n          }\n        });\n      } else {\n        newData[key] = row[key];\n      }\n    });\n    return newData;\n  };\n\n  useEffect(() => {\n    fetch(\"https://cors-anywhere.herokuapp.com/https://sahmed93846.api-us1.com/api/3/contacts\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Api-Token\": \"bcd062dedabcd0f1ac8a568cdcf58660c44d7e79b91763cc1a5d0c03d52c522d851fceb0\"\n      }\n    }).then(res => res.json()).then(response => {\n      console.log(response.contacts);\n      let newData = preprocessData(response.contacts);\n      console.log(\"Processed DATA:\" + newData);\n      setData(newData); // console.log(\"ðŸ”¥ðŸ”¥ðŸ”¥\", data);\n    }).catch(err => {\n      console.error(err);\n    });\n  }, []);\n\n  const _useTable = useTable({\n    columns,\n    data\n  }, useRowSelect, hooks => {\n    hooks.visibleColumns.push(columns => [{\n      id: \"selection\",\n      Header: ({\n        getToggleAllRowsSelectedProps\n      }) => /*#__PURE__*/React.createElement(Checkbox, Object.assign({}, getToggleAllRowsSelectedProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      })),\n      Cell: ({\n        row\n      }) => /*#__PURE__*/React.createElement(Checkbox, Object.assign({}, row.getToggleRowSelectedProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 30\n        }\n      }))\n    }, ...columns]);\n  }),\n        getTableProps = _useTable.getTableProps,\n        getTableBodyProps = _useTable.getTableBodyProps,\n        headerGroups = _useTable.headerGroups,\n        rows = _useTable.rows,\n        prepareRow = _useTable.prepareRow,\n        selectedFlatRows = _useTable.selectedFlatRows;\n\n  const firstPageRows = rows.slice(0, 10);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"table\", Object.assign({}, getTableProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, headerGroups.map(headerGroup => /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, headerGroup.getHeaderGroupProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), headerGroup.headers.map(column => /*#__PURE__*/React.createElement(\"th\", Object.assign({}, column.getHeaderProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }), column.render(\"Header\")))))), /*#__PURE__*/React.createElement(\"tbody\", Object.assign({}, getTableBodyProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), firstPageRows.map(row => {\n    prepareRow(row);\n    return /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, row.getRowProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }), row.cells.map(cell => {\n      return /*#__PURE__*/React.createElement(\"td\", Object.assign({}, cell.getCellProps(), {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }), cell.render(\"Cell\"));\n    }));\n  }))), /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"code\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, JSON.stringify({\n    selectedFlatRows: selectedFlatRows.map(row => row.original)\n  }, null, 2))));\n};","map":{"version":3,"sources":["C:/Users/jainp/Desktop/work_Space/codingchallenge/y5j45/src/components/RowSelection.js"],"names":["React","useMemo","useState","useEffect","useTable","useRowSelect","COLUMNS","Checkbox","RowSelection","columns","data","setData","fetchDataFromLink","link","fetch","headers","then","res","json","response","console","log","catch","err","error","preprocessData","processedData","forEach","element","push","preprocessRow","row","newData","keysToBeFetched","Object","keys","map","key","linkName","includes","dataFromLink","contacts","hooks","visibleColumns","id","Header","getToggleAllRowsSelectedProps","Cell","getToggleRowSelectedProps","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","selectedFlatRows","firstPageRows","slice","headerGroup","getHeaderGroupProps","column","getHeaderProps","render","getRowProps","cells","cell","getCellProps","JSON","stringify","original"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect } from \"react\";\r\nimport { useTable, useRowSelect } from \"react-table\";\r\nimport { COLUMNS } from \"./columns\";\r\nimport \"./table.css\";\r\nimport { Checkbox } from \"./Checkbox\";\r\n\r\nexport const RowSelection = () => {\r\n  const columns = useMemo(() => COLUMNS, []);\r\n  const [data, setData] = useState([]);\r\n  const fetchDataFromLink = (link) => {\r\n    //TODO fetch link, should be an Array\r\n    //return array of string\r\n\r\n    //https://cors-anywhere.herokuapp.com/https://sahmed93846.api-us1.com/api/3/contacts/193/contactTags\r\n    fetch(\"https://cors-anywhere.herokuapp.com/\" + link, {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Api-Token\":\r\n          \"bcd062dedabcd0f1ac8a568cdcf58660c44d7e79b91763cc1a5d0c03d52c522d851fceb0\"\r\n      }\r\n    })\r\n      .then((res) => res.json())\r\n      .then((response) => {\r\n        console.log(\"ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥\", response);\r\n        return response;\r\n        //setData(response.contacts);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  };\r\n\r\n\r\n  const preprocessData = (data) => {\r\n    let processedData = [];\r\n    console.log(\"processing data\");\r\n    data.forEach((element) => {\r\n      console.log(element);\r\n      processedData.push(preprocessRow(element));\r\n    });\r\n    return processedData;\r\n  };\r\n  const preprocessRow = (row) => {\r\n    let newData = {};\r\n    let keysToBeFetched = [\"contactTags\", \"deals\", \"geoIps\"];\r\n    Object.keys(row).map((key) => {\r\n      // console.log(\"ðŸš€ðŸš€ðŸš€ðŸš€\", key);\r\n      if (key === \"links\") {\r\n        newData[key] = {};\r\n        Object.keys(row[key]).map((linkName) => {\r\n          //\r\n          if (keysToBeFetched.includes(linkName)) {\r\n            let dataFromLink = fetchDataFromLink(row[key][linkName]);\r\n            console.log(\"Data From Link \" + dataFromLink);\r\n            newData[key][linkName] = dataFromLink;\r\n          } else {\r\n            newData[key][linkName] = row[key][linkName];\r\n          }\r\n        });\r\n      } else {\r\n        newData[key] = row[key];\r\n      }\r\n    });\r\n\r\n    return newData;\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(\r\n      \"https://cors-anywhere.herokuapp.com/https://sahmed93846.api-us1.com/api/3/contacts\",\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Api-Token\":\r\n            \"bcd062dedabcd0f1ac8a568cdcf58660c44d7e79b91763cc1a5d0c03d52c522d851fceb0\"\r\n        }\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((response) => {\r\n        console.log(response.contacts);\r\n        let newData = preprocessData(response.contacts);\r\n        console.log(\"Processed DATA:\" + newData);\r\n        setData(newData);\r\n        // console.log(\"ðŸ”¥ðŸ”¥ðŸ”¥\", data);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n  }, []);\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    selectedFlatRows\r\n  } = useTable(\r\n    {\r\n      columns,\r\n      data\r\n    },\r\n    useRowSelect,\r\n    (hooks) => {\r\n      hooks.visibleColumns.push((columns) => [\r\n        {\r\n          id: \"selection\",\r\n          Header: ({ getToggleAllRowsSelectedProps }) => (\r\n            <Checkbox {...getToggleAllRowsSelectedProps()} />\r\n          ),\r\n          Cell: ({ row }) => <Checkbox {...row.getToggleRowSelectedProps()} />\r\n        },\r\n        ...columns\r\n      ]);\r\n    }\r\n  );\r\n\r\n  const firstPageRows = rows.slice(0, 10);\r\n\r\n  return (\r\n    <>\r\n      <table {...getTableProps()}>\r\n        <thead>\r\n          {headerGroups.map((headerGroup) => (\r\n            <tr {...headerGroup.getHeaderGroupProps()}>\r\n              {headerGroup.headers.map((column) => (\r\n                <th {...column.getHeaderProps()}>{column.render(\"Header\")}</th>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </thead>\r\n        <tbody {...getTableBodyProps()}>\r\n          {firstPageRows.map((row) => {\r\n            prepareRow(row);\r\n            return (\r\n              <tr {...row.getRowProps()}>\r\n                {row.cells.map((cell) => {\r\n                  return (\r\n                    <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      <pre>\r\n        <code>\r\n          {JSON.stringify(\r\n            {\r\n              selectedFlatRows: selectedFlatRows.map((row) => row.original)\r\n            },\r\n            null,\r\n            2\r\n          )}\r\n        </code>\r\n      </pre>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}